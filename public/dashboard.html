<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ease Attendance | Dashboard</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- JQuery -->
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="vendor/jquery.input-allow.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="modules/all.min.css">
    <link rel="stylesheet" type="text/css" href="modules/font-awesome.css">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://code.iconify.design/1/1.0.6/iconify.min.js"></script>
</head>
<body>
<div class="container-fluid row full-width">

    <div class="sidebar-sticky col" id="dashboard-sidebar">
        <h4 id="user-name"></h4>
        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            <span>Menu</span>
        </h6>
        <hr>
        <ul class="nav flex-column nav-tabs" id="dashboard-tabs" role = "tablist">
            <li class="nav-item">
                <a class="nav-link active" id="attendance-tab" href="#attendance" data-toggle="tab" role="tab" aria-controls="attendance" aria-selected="true">
                    <span class="iconify" data-inline="false" data-icon="bi:card-checklist" style="font-size: 18px;"></span>
                    Take Attendance <span class="sr-only">(current)</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="meetings-tab" href="#meetings" data-toggle="tab" role="tab" aria-controls="meetings" aria-selected="false">
                    <span class="iconify" data-inline="false" data-icon="fluent:meet-now-16-regular" style=" font-size: 18px;"></span>
                    My Meetings
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="records-tab" href="#records" data-toggle="tab" role="tab" aria-controls="students" aria-selected="false">
                    <span class="iconify" data-inline="false" data-icon="ic:outline-access-time" style="font-size: 18px;"></span>
                    Meeting Records
                </a>
            </li>
        </ul>

        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
            <span>Account</span>
        </h6>
        <hr>
        <ul class="nav flex-column mb-2">
            <li class="nav-item">
                <a onclick="resetSettingInput()" id="settings-link" class="nav-link" data-toggle="modal" data-target="#settings-modal" href="#">
                    <span class="iconify" data-inline="false" data-icon="ant-design:setting-outlined" style="font-size: 18px;"></span>
                    Settings
                </a>
            </li>
            <li class="nav-item">
                <span class="nav-link" href="#">
                    <a onclick="logout()" id="logout-button">
                         <span class="iconify" data-inline="false" data-icon="bx:bx-log-out" style=" font-size: 18px;"></span>
                        Sign Out</a>
                </span>
            </li>
        </ul>
    </div>
    <div class="notify"><span id="notifyType"></span></div>
    <div class="col">

        <div hidden class="tab-content" id="myTabContent">

            <div class="tab-pane fade show active container col" id="attendance" role="tabpanel" aria-labelledby="home-tab">
                <h1 id="currentMeeting-name">No Meeting Has Started</h1>
                <h5 id="meeting-id-attendance">ID:</h5>
                <h5 id="status">Status:
                    <span id="status-dot" class='dot dot-danger'></span>
                </h5>
                <div id="person-search" class="input-group flex-nowrap float-left">
                    <div id="search-prepend" class="input-group-prepend">
                        <span class="input-group-text" id="addon-wrapping"><span class="iconify" data-inline="false" data-icon="ant-design:search-outlined" style="font-size: 20px;"></span></span>
                    </div>
                    <input id="student-search-input-field" onclick="this.select()" type="text" class="form-control student-search-input" placeholder="Student Name" aria-label="Student Name" aria-describedby="addon-wrapping">
                </div>
                <div id="filter-group" class="btn-group float-right" role="group" aria-label="Basic example">
                    <a id="all-filter" onclick="filterClick(this.id)" type="button" class="btn btn-secondary filter-button filter-active">All</a>
                    <a id="present-filter" onclick="filterClick(this.id)" type="button" class="btn btn-secondary filter-button">Present</a>
                    <a id="absent-filter" onclick="filterClick(this.id)" type="button" class="btn btn-secondary filter-button">Absent</a>
                    <a id="left-meeting-filter" onclick="filterClick(this.id)" type="button" class="btn btn-secondary filter-button">Left Meeting</a>
                    <a id="not-registered-filter" onclick="filterClick(this.id)" type="button" class="btn btn-secondary filter-button">Not Registered</a>
                </div>
                <table class="table" id="participant-table">
                    <thead id="participant-table-head">
                    <tr>
                        <th class="table-head-title" scope="col">First Name</th>
                        <th class="table-head-title" scope="col">Last Name</th>
                        <th class="table-head-title" scope="col">Status</th>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
            <div class="tab-pane fade container col justify-content-center" id="meetings" role="tabpanel" aria-labelledby="profile-tab">
                <h1 id="meeting-title" class="tab-title float-left">My Meetings</h1>
                <table class="table" id="my-meetings-table">
                    <thead>
                    <tr>
                        <th class="table-head-title meeting-table-title" scope="col">Meeting Name</th>
                        <th class="table-head-title meeting-table-title" scope="col" >Meeting ID</th>
                    </tr>
                    </thead>
                    <tbody id="meeting-table">
                    </tbody>
                </table>
                <button onclick="addMeetingModal()" class="float-right btn" data-toggle="modal" data-target="#add-edit-meeting-modal" type="button" id="add-meeting-button">Add Meeting</button>
            </div>
            <div class="tab-pane fade" id="records" role="tabpanel" aria-labelledby="contact-tab"><h1 id="past-meeting-title">Meeting Records</h1>
                <div id="records-search" class="input-group flex-nowrap float-left">
                    <div id="records-prepend" class="input-group-prepend">
                        <span class="input-group-text" id="addon-wrapping-2"><span class="iconify" data-inline="false" data-icon="ant-design:search-outlined" style="font-size: 20px;"></span></span>
                    </div>
                    <input id="records-search-input-field" onclick="this.select()" type="text" class="form-control student-search-input" placeholder="Meeting Name" aria-label="Meeting Name" aria-describedby="addon-wrapping">
                </div>
                <table class="table" id="records-table">
                    <thead id="records-table-head">
                    <tr>
                        <th class="table-head-title" scope="col">Meeting Name</th>
                        <th class="table-head-title" scope="col">Meeting ID</th>
                        <th class="table-head-title" scope="col">Time Started</th>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <!-- Meeting Record Modal -->
                <div class="modal fade" id="meeting-record-modal" tabindex="-1" role="dialog" aria-labelledby="meeting-record=modal" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button id="close-records-modal" type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span class="iconify" data-inline="false" data-icon="cil:x" style="font-size: 35px;"></span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <h5 id="current-record-name">Meeting Name</h5>
                                <h5 id="current-record-date">Date: </h5>
                                <h5 id="current-record-id">Meeting ID</h5>
                                <div id="current-record-search" class="input-group flex-nowrap float-left">
                                    <div id="current-record-prepend" class="input-group-prepend">
                                        <span class="input-group-text" id="addon-wrapping-3"><span class="iconify" data-inline="false" data-icon="ant-design:search-outlined" style="font-size: 20px;"></span></span>
                                    </div>
                                    <input id="current-record-search-input-field" onclick="this.select()" type="text" class="form-control student-search-input" placeholder="Filter" aria-label="Filter" aria-describedby="addon-wrapping">
                                </div>
                                <table class="table" id="current-record-table">
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                            <div class="modal-footer">
                                <button onclick="deleteRecord()" id="delete-record-button" type="button" class="btn btn-primary">Delete record</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Add/Edit Meeting Modal -->
    <div class="modal fade meeting-modal" id="add-edit-meeting-modal" tabindex="-1" role="dialog" aria-labelledby="add-edit-meeting-modal" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="meeting-modal-title" class="float-left"></h2>
                    <button id="close-meetings-modal" type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span class="iconify" data-inline="false" data-icon="cil:x" style="font-size: 35px;"></span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="col-5">
                        <h5 class="modal-title">Meeting Details</h5>
                        <div id="meeting-name" class="input-group flex-nowrap float-left">
                            <div id="meeting-name-prepend" class="input-group-prepend">
                                <span class="input-group-text">Name</span>
                            </div>
                            <input id="meeting-name-input-field" onclick="this.select()" type="text" class="form-control modal-input" placeholder="Meeting Name" aria-label="Meeting Name" aria-describedby="addon-wrapping">
                        </div>
                        <div id="meeting-id" class="input-group flex-nowrap float-left">
                            <div id="meeting-id-prepend" class="input-group-prepend">
                                <span class="input-group-text">ID</span>
                            </div>
                            <input allow="[0-9]" id="meeting-id-input-field" onclick="this.select()" type="text" class="form-control modal-input" placeholder="XXX-XXXX-XXXX" aria-label="Meeting ID" aria-describedby="addon-wrapping">
                        </div>
                        <h5 class="modal-title">Students</h5>
                        <table id="student-input-table">
                            <tbody id="student-input-table-body">
                            <tr>
                                <th scope="col"> <input type="text" placeholder="First name" class="form-control student-name modal-input student-first-name"></th>
                                <th scope="col"> <input type="text" placeholder="Last name" class="form-control student-name modal-input"></th>
                                <th scope="col"> <button onclick="deleteStudent(this)" class="btn trash-btn" type="button"><span class="iconify" data-inline="false" data-icon="ei:trash" style="font-size: 30px;"></span></button></th>

                            </tr>
                            <tr>
                                <th scope="col"> <input type="text" placeholder="First name" class="form-control student-name student-first-name modal-input"></th>
                                <th scope="col"> <input type="text" placeholder="Last name" class="form-control student-name modal-input"></th>
                                <th scope="col"> <button onclick="deleteStudent(this)" class="btn trash-btn" type="button"><span class="iconify" data-inline="false" data-icon="ei:trash" style="font-size: 30px;"></span></button></th>

                            </tr>
                            <tr>
                                <th scope="col"> <input type="text" placeholder="First name" class="form-control student-name student-first-name modal-input"></th>
                                <th scope="col"> <input type="text" placeholder="Last name" class="form-control student-name modal-input"></th>
                                <th scope="col"> <button onclick="deleteStudent(this)" class="btn trash-btn" type="button"><span class="iconify" data-inline="false" data-icon="ei:trash" style="font-size: 30px;"></span></button></th>

                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <button onclick="addStudent()" class="float-right btn" type="button" id="add-student-button">Add Student</button>
                </div>
                <div class="modal-footer">
                    <button onclick="deleteMeeting()" id="delete-meeting-button" type="button" class="btn btn-primary">Delete Meeting</button>
                    <button onclick="addMeeting()" id="save-meeting-button" type="button" class="btn btn-primary">Finish</button>
                </div>
            </div>
        </div>
    </div>
    </div>
    <div hidden id="verifyEmail" class="container justify-content-center text-center">
        <h3 id="verifyEmailTitle">Please verify email</h3>
        <h6 id="verifyEmailDescription">A verification link has been sent to your email. If you did not receive it, resend the verification link or change your email in settings</h6>
        <button type="button" onclick="resendVerificationEmail()" class="btn save-setting-button">Resend verification email</button>
    </div>
</div>

    <!--Settings Modal-->
    <div class="modal fade" id="settings-modal" tabindex="-1" role="dialog" aria-labelledby="settings-modal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Account Settings</h3>
                    <button id="close-settings-modal" type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span class="iconify" data-inline="false" data-icon="cil:x" style="font-size: 35px;"></span>
                    </button>
                </div>
                <div class="modal-body col-5">
                    <h6>Name</h6>
                    <div id="displayName" class="input-group flex-nowrap float-left">
                        <div id="displayName-prepend" class="input-group-prepend">
                            <span class="input-group-text" id="addon-wrapping-4"><span class="iconify" data-inline="false" data-icon="ant-design:user-outlined" style="font-size: 20px;"></span></span>
                        </div>
                        <input autocomplete="off" id="displayName-input-field" onclick="this.select()" type="text" class="form-control " placeholder="Enter a new name" aria-label="New Name" aria-describedby="addon-wrapping">
                    </div>
                    <button type="button" onclick="saveDisplayName()" class="btn save-setting-button">Save changes</button>

                    <h6>Email</h6>
                    <div id="old-email" class="input-group flex-nowrap float-left">
                        <div id="old-email-prepend" class="input-group-prepend">
                            <span class="input-group-text" ><span class="iconify" data-inline="false" data-icon="carbon:email" style="font-size: 20px;"></span></span>
                        </div>
                        <input autocomplete="off" id="old-email-input-field" onclick="this.select()" type="email" class="form-control " placeholder="Enter email" aria-label="Current Email" aria-describedby="addon-wrapping">
                    </div>
                    <div id="current-password" class="input-group flex-nowrap float-left">
                        <div id="current-password-prepend" class="input-group-prepend">
                             <span class="input-group-text" ><span class="iconify" data-inline="false" data-icon="codicon:lock" style="font-size: 20px;"></span></span>
                        </div>
                        <input autocomplete="off" id="current-password-input-field" onclick="this.select()" type="password" class="form-control " placeholder="Enter password" aria-label="Current pass" aria-describedby="addon-wrapping">
                    </div>
                    <div id="email" class="input-group flex-nowrap float-left">
                        <div id="email-prepend" class="input-group-prepend">
                            <span class="input-group-text" id="addon-wrapping-5"><span class="iconify" data-inline="false" data-icon="carbon:email" style="font-size: 20px;"></span></span></span>
                        </div>
                        <input autocomplete="off" id="email-input-field" onclick="this.select()" type="email" class="form-control" placeholder="Enter a new email" aria-label="New Email" aria-describedby="addon-wrapping">
                    </div>
                    <button type="button" onclick="saveEmail()" class="btn save-setting-button">Save changes</button>
                    <button hidden id="settings-resend-verification-link-button" type="button" onclick="settingsResendVerificationEmail()" class="btn save-setting-button">Resend verification email</button>
                    <h6>Password</h6>
                    <div id="pass-current-email" class="input-group flex-nowrap float-left">
                        <div id="pass-current-email-prepend" class="input-group-prepend">
                            <span class="input-group-text" id="addon-wrapping-6"><span class="iconify" data-inline="false" data-icon="carbon:email" style="font-size: 20px;"></span></span></span>
                        </div>
                        <input autocomplete="off" id="pass-current-email-input-field" onclick="this.select()" type="email" class="form-control " placeholder="Enter email" aria-label="Old pass" aria-describedby="addon-wrapping">
                    </div>
                    <button type="button" onclick="resetPassword()" class="btn save-setting-button">Send reset link</button>
                </div>


            </div>
        </div>
    </div>
</div>
</div>
</div>



</body>
<script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.5/firebase-analytics.js"></script>
<!-- Initialize Firebase -->

<script>
    var firebaseConfig = {
        apiKey: "AIzaSyArNouw56zZhTG5zuwFAYuev3zlK02VMok",
        authDomain: "easeattendance-c68ed.firebaseapp.com",
        projectId: "easeattendance-c68ed",
        storageBucket: "easeattendance-c68ed.appspot.com",
        messagingSenderId: "200365032412",
        appId: "1:200365032412:web:4935cf8c68760d25818519",
        measurementId: "G-HW6X22SK2H"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();

</script>
<script type="text/javascript" src="dashboard.js"></script>
</html>

